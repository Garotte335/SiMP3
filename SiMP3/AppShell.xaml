<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="SiMP3.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="SiMP3"
    Shell.NavBarHasShadow="False"
    Shell.BackgroundColor="{StaticResource ShellBackground}"
    Shell.TitleColor="White"
    Shell.ForegroundColor="White"
    Shell.DisabledColor="#6E6E78">
    <Shell.Resources>
        <Color x:Key="ShellBackground">#0A0A0A</Color>
        <Color x:Key="ShellAccent">#C084FC</Color>
        <Color x:Key="ShellSurface">#121216</Color>
        <Color x:Key="ShellBorder">#1F1F28</Color>
    </Shell.Resources>
    
    <Shell.TitleView>
        <Grid Padding="14,10" BackgroundColor="{StaticResource ShellBackground}" RowSpacing="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto" ColumnSpacing="12" VerticalOptions="Center">
                <Label
                    Text="SiMP3"
                    FontSize="21"
                    FontAttributes="Bold"
                    TextColor="White"
                    VerticalOptions="Center" />

                <Border
                    Grid.Column="1"
                    WidthRequest="44"
                    HeightRequest="44"
                    BackgroundColor="{StaticResource ShellSurface}"
                    Stroke="{StaticResource ShellBorder}"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 14"
                    HorizontalOptions="End"
                    VerticalOptions="Center">
                    <ImageButton
                        x:Name="SearchToggleButton"
                        Padding="10"
                        BackgroundColor="Transparent"
                        Source="search.png"
                        Clicked="OnSearchTapped"
                        HorizontalOptions="Center"
                        VerticalOptions="Center" />
                </Border>

                <Border
                    Grid.Column="2"
                    WidthRequest="40"
                    HeightRequest="40"
                    BackgroundColor="{StaticResource ShellSurface}"
                    Stroke="{StaticResource ShellBorder}"
                    StrokeThickness="1"
                    StrokeShape="RoundRectangle 12"
                    HorizontalOptions="End"
                    VerticalOptions="Center">
                    <ImageButton
                        x:Name="SettingsButton"
                        Padding="10"
                        BackgroundColor="Transparent"
                        Source="menu.png"
                        Clicked="OnSettingsClicked"
                        HorizontalOptions="Center"
                        VerticalOptions="Center" />
                </Border>
            </Grid>

            <Border
                Grid.Row="1"
                BackgroundColor="{StaticResource ShellSurface}"
                Stroke="{StaticResource ShellBorder}"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 14"
                Padding="10,6"
                IsVisible="False"
                x:Name="SearchBarContainer">
                <SearchBar
                    x:Name="GlobalSearchBar"
                    Placeholder="Пошук"
                    TextChanged="OnSearchTextChanged"
                    BackgroundColor="Transparent"
                    FontSize="14"
                    TextColor="White"
                    PlaceholderColor="#121216"
                    CancelButtonColor="{StaticResource ShellAccent}"
                    HeightRequest="36"
                    HorizontalOptions="Fill"
                    VerticalOptions="Center" />
            </Border>
        </Grid>
    </Shell.TitleView>
</Shell>
